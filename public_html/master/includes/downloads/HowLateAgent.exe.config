<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
      <section name="com.howlate.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
      <section name="HowLateAgent.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    </sectionGroup>
  </configSections>
  <applicationSettings>
    <com.howlate.Properties.Settings>
      <setting name="PollIntervalSeconds" serializeAs="String">
        <value>20</value>
      </setting>
      <setting name="Instance" serializeAs="String">
        <value>.\BPSINSTANCE</value>
      </setting>
      <setting name="Database" serializeAs="String">
        <value>BPSPatients</value>
      </setting>
      <setting name="UID" serializeAs="String">
        <value>BPSViewer</value>
      </setting>
      <setting name="PWD" serializeAs="String">
        <value>123456</value>
      </setting>
      <setting name="URL" serializeAs="String">
        <value>https://margateclinic.how-late.com/api?ver=post</value>
      </setting>
      <setting name="Credentials" serializeAs="String">
        <value>alexf.9cbf8a4dcb8e30682b927f352d6559a0</value>
      </setting>
      <setting name="Subdomain" serializeAs="String">
        <value>margateclinic</value>
      </setting>
      <setting name="SelectSessions" serializeAs="String">
        <value>select * from BPS_Sessions where Provider &lt;&gt; ''</value>
      </setting>
      <setting name="Clinic" serializeAs="String">
        <value>31</value>
      </setting>
      <setting name="NotifyHorizonSeconds" serializeAs="String">
        <value>7200</value>
      </setting>
      <setting name="SelectBPS" serializeAs="String">
        <value>select a1.Provider, a1.Status, a1.ArrivalTime, a1.AppointmentDate, a1.AppointmentTime, a1.ConsultationTime, 7200 As Horizon from BPS_Appointments a1 where a1.AppointmentDate = DATEADD(dd, 0, DATEDIFF(dd, 0, GETDATE()))
and a1.ConsultationTime = 
(SELECT MAX(a2.ConsultationTime) FROM BPS_Appointments a2 
WHERE a2.AppointmentDate = a1.AppointmentDate and a2.Provider 
= a1.Provider and a2.ConsultationTime != 0)

</value>
      </setting>
      <setting name="SelectToNotify" serializeAs="String">
        <value>select a1.Patient, a1.InternalID, a1.AppointmentDate, a1.AppointmentTime, a1.Provider, p.MobilePhone from BPS_Appointments a1
left outer join BPS_Patients p on p.InternalID = a1.InternalID
where a1.Provider = @Provider
and (
 (a1.AppointmentDate = @AppointmentDate
and a1.AppointmentTime &gt; @AppointmentTime
and a1.AppointmentTime &lt;= @AppointmentTime + @Horizon)
 or
 (@AppointmentTime &gt; (84600 - @Horizon) and a1.AppointmentDate = DATEADD(day,1,@AppointmentDate) 
  and a1.AppointmentTime &lt; @AppointmentTime - 86400 + @Horizon
 )
)</value>
      </setting>
    </com.howlate.Properties.Settings>

  </applicationSettings>
</configuration>

